import strutils

proc isWall(x:int, y:int):bool =
  let favnum = 1358
  let eq = (x*x + 3*x + 2*x*y + y + y*y) + favnum
  if count($(eq.toBin(256)),'1') mod 2 == 0: return false else: return true


proc drawMap(map:seq[seq[char]]) =
  for k, v in map:
    var line:string
    for ch in v:
      line = line & " " & $ch
    echo k, line

proc makeMap(size:int):seq[seq[char]] =
  for y in 0 .. size:
    result.add(@[])
    for x in 0 .. size:
      if x == 1 and y == 1: result[y].add('O')
      elif x == 31 and y == 39: result[y].add('X')
      else:result[y].add(if isWall(x, y): '#' else: '.')

drawMap(makeMap(50))


#[ Answer Part 1: 96 - printed the map then figured it out by hand
0  . # # . . # . # . # # . # . . . . # # . . . # . . # . # # # # . # # # # . . . # . . # . . # . . # . #
1  . O # # . . # # . # # . # . . # . . . # # # . # . . . . . # . . . . . # # . # # # # # # . . . . # . .
2  # - - - # . # # . . # # # # # # # # . # . # # # # # . . . # . . # # . # # . # . . . . . # # . # # # .
3  . # # - - - - - - - - - - - . # # # . . . . . # # # # # . # # # # # . . . . # . . # # . . # . # # # .
4  # # # # # . # # . # # # # - . . # . # # . . . . # . . # . # . . # . # # . # # # # . # # . . . . # # #
5  . # # . # . . # . # # . # - # . # # # # # # . . # . # # . . # . # # # # . . # . # # # # # # # . . # #
6  . . . # # # . . . . . . # - - # . . # . . # # # # . # # # . . # . . # . # . # # . . # . . . . . . . #
7  # # . # # # # . . # # # . # - # # . # . # . . . # . . # . # . # # . # # . . . . . . # . . # # # # . .
8  . . . . # # # # # # . # # # - . # # # . . # # . # . . # # # . . # # . # . . # # . # # # # . . . # . .
9  # . # . . # # . . # . - - - - . . # # # . # . . # # # . . . . . . # . # # # # # . . # . # . . . # . .
10 # . . . . . . . . # # - # # . # . . . . . # . . . . # . # # . # . # # # . . # . # . # # # # . . # # .
11 . # # # # # # . # . # - # # . . . # # # . # # . . . # # . # . . # . . # # . # # . . . # # # # # # # .
12 # . . . . # # . . # # - # . # # # . . # . # # # . # . # # . # . . # . . # # . # . . . . . # . . # # #
13 # . . # . # # # . # - - # . . . # . # # . . . # . . # . # . . # . . . . . . . # # . . # . # # . . # #
14 # # # # . . # . . # - # # # # # # . # # # # # . # . . # # # . . # # . # # # . # # # # . . . # . . . .
15 # . . . . . # # . # - # # . . # . . . # # . # . # # . # # # # . . # . # # # . . . . # . . . # . . # #
16 # . # # . . . # . . - - - - . # . . . . . . # . . . . . # . # # # . . . # # # # # # # # . # # # # # .
17 # . # # # . # # # # # # # - # # # # # # # # . # # . # . # # # . # # . . . # # . . # . # . # # . . # .
18 # . . # # . # . . . # # # - # # - - - # . # # . # . . # . . . . . # # . . . . # . # # . . . . . . # .
19 . # . # # . # . . . . . # - - - - # - - # . # # . # . # # # # . # . # . # # . . # . # # # # # . # # .
20 # # . . . # # # . # # . # . # # # . # - # # . # # # . . . # # . . # # . # . # . . . . . . # # . # . .
21 . . . # . . # # . # . . # # . . # # . - . # . . . . . # . . # # . # . . # . . # # . . # . # # . # . #
22 # # # # # . . . . # . . . # # # . # . - . # # . # # # # # . # . . # . . # # . # # # # # . . # # # . #
23 . . . # . # # . # # # . # . . # . # # - # . # # # . . # . . # # . # # # # # . . . . . . . . . . # . #
24 # . . # # # # . . # # . . # . # . # # - - # - - - - - # . . . # . # . . # # # # # . # # . # # . # # .
25 # . . . . # . # . . . # . . # # . . # # - - - # # # - # # . # # . . # . . # # . # . # # . # . . . # .
26 # # # . . # # . # # . . # . # # # . # . # # # # . # - # # . # # # . # . . . . . # . . . . # . # . # #
27 # . # # . . # # # # # # # . . # . . # . . . . . # # - - - - - # . . # # # # # # . # # . . # . . # . .
28 . . . # # # . . # . . . . . . # . . # # # . # . # . # # # . - # . . . . . # . # # . # # # . # . . # #
29 # . # . . # # . # . . # # # # # # # # . # # # . # # # . # # - # # . . # . # . . # # # . # . . # . # #
30 # . . # . . . # # # # . . . . # . . . . . . . # . . . # . # - # # # # # . # . # . . . # # # . . . . .
31 . # . . . # . . . . # . . # . # . # # . . # . # # # . . # # - # # . . . # # . # # # . # # # # . # # .
32 # . # # # # # # # # # # # # . # . # # # # # . . . . # . # . - - - - # . # # . . . . . . # . # . # . #
33 # . # . . # # . . # . . . . # # . . # . . . . # # . # . # . . # # - # . . . . # # . # . # # . . # . #
34 # . # . . . . # . # # . # . # . # . # . # # # . # . . # # # # # # - # . # # # . # . # # . # . . # . .
35 . . # # . # . . # . # . # . # # . . # # . . # # . # . . . . . # - - # # # . # # . . . # . # # # . # #
36 . # . # # . # . . . # . # # . # . . . # . # . # # # # # # . . # - # . . # # . # . # . # . # . # # # #
37 . . # . # . . # # # . . . # . # # . # # . # # . . # # . # . . # - - - . . # . # . . # # . . . . . # #
38 # . . # # # . # . # . # . # # # # . # # . . # . . . . . # # . . # # - - . # . . # . # # # # . . . . #
39 # # . # # # . . # # . . # . . . # . . . . . # . . # # # # # # X - # # - # # # # . . . # # # # # # . .
40 . . . . # . # . # . # . . # # . # . # # . # # # # # . . # . # # - # # - # # . # . . . . # . . . # . .
41 # # # . # # . . # . . # . # . . # # . # . # # . . # . . # # # # - # # - . . # # # # # . # . . . # . #
42 . . . # . # . # # # . . . # . . . # # . . . . . . # # # . . # # - - - - # . # # . . # # # # . . # . .
43 . # . # . # . # # # # . # # # . # . # # # # # . # . . . # . . . . # # . # . . . . . . . # # # # . # .
44 # # . # . . . . # # # . . # # . . . . . . # # . . # # . . . # # # . # . # . # # . . # . # # . # # # #
45 . . # # # . # . . # . # . . . # # . . # . # # # . # . # # . # . # # . . # # . # # # . . . # . . . # .
46 # . # . # . # . . # # . # # . # # # # # . . # . . # # . # . # # . # . . . # . # . # . . . # # . . # #
47 # . # # . . # # . . # # # # . # # . . . . . # # . . # # . . . # # # # . # # . # . # # . # . # . # . #
48 # # . # . . . # # # . . # . . . . . # # . . . # # # . # . . . . . # # . # # . # . # # . . # # . . # #
49 . # # # # . # . . . # . # . . # # . # # # . # . . . . # # . . # . . . . . . # # . . # # . # . # . . .
50 . . . # # . . # # . . # # # # # # . . # # . . # # # . # # # # # # # # . # . # # # . # . . # # . # # #
]#

#[ Answer Part 2: 141 - printed the map then figured it out by hand
0  - # # - - # . # - # # . # . . . . # # . . . # . . # . # # # # . # # # # . . . # . . # . . # . . # . #
1  - O # # - - # # - # # . # . . # . . . # # # . # . . . . . # . . . . . # # . # # # # # # . . . . # . .
2  # - - - # - # # - - # # # # # # # # . # . # # # # # . . . # . . # # . # # . # . . . . . # # . # # # .
3  . # # - - - - - - - - - - - - # # # . . . . . # # # # # . # # # # # . . . . # . . # # . . # . # # # .
4  # # # # # - # # - # # # # - - - # . # # . . . . # . . # . # . . # . # # . # # # # . # # . . . . # # #
5  . # # . # - - # - # # - # - # - # # # # # # . . # . # # . . # . # # # # . . # . # # # # # # # . . # #
6  . . - # # # - - - - - - # - - # . . # - - # # # # . # # # . . # . . # . # . # # . . # . . . . . . . #
7  # # - # # # # - - # # # . # - # # . # - # . . . # . . # . # . # # . # # . . . . . . # . . # # # # . .
8  . - - - # # # # # # - # # # - - # # # - - # # . # . . # # # . . # # . # . . # # . # # # # . . . # . .
9  # - # - - # # - - # - - - - - - - # # # - # . . # # # . . . . . . # . # # # # # . . # . # . . . # . .
10 # - - - - - - - - # # - # # - # - - - - - # . . . . # . # # . # . # # # . . # . # . # # # # . . # # .
11 . # # # # # # - # . # - # # - - - # # # - # # . . . # # . # . . # . . # # . # # . . . # # # # # # # .
12 # . . . . # # - - # # - # . # # # . . # - # # # . # . # # . # . . # . . # # . # . . . . . # . . # # #
13 # . . # . # # # - # - - # . . . # . # # - - - # . . # . # . . # . . . . . . . # # . . # . # # . . # #
14 # # # # . . # - - # - # # # # # # . # # # # # . # . . # # # . . # # . # # # . # # # # . . . # . . . .
15 # . . . . . # # - # - # # - - # . . . # # . # . # # . # # # # . . # . # # # . . . . # . . . # . . # #
16 # . # # . . . # - - - - - - - # . . . . . . # . . . . . # . # # # . . . # # # # # # # # . # # # # # .
17 # . # # # . # # # # # # # - # # # # # # # # . # # . # . # # # . # # . . . # # . . # . # . # # . . # .
18 # . . # # . # . . . # # # - # # - - - # . # # . # . . # . . . . . # # . . . . # . # # . . . . . . # .
19 . # . # # . # . . . . . # - - - - # - - # . # # . # . # # # # . # . # . # # . . # . # # # # # . # # .
20 # # . . . # # # . # # . # - # # # . # - # # . # # # . . . # # . . # # . # . # . . . . . . # # . # . .
21 . . . # . . # # . # . . # # . . # # - - - # . . . . . # . . # # . # . . # . . # # . . # . # # . # . #
22 # # # # # . . . . # . . . # # # . # - - - # # . # # # # # . # . . # . . # # . # # # # # . . # # # . #
23 . . . # . # # . # # # . # . . # . # # - # . # # # . . # . . # # . # # # # # . . . . . . . . . . # . #
24 # . . # # # # . . # # . . # . # . # # - . # . . . . . # . . . # . # . . # # # # # . # # . # # . # # .
25 # . . . . # . # . . . # . . # # . . # # . . . # # # . # # . # # . . # . . # # . # . # # . # . . . # .
26 # # # . . # # . # # . . # . # # # . # . # # # # . # . # # . # # # . # . . . . . # . . . . # . # . # #
27 # . # # . . # # # # # # # . . # . . # . . . . . # # . . . . . # . . # # # # # # . # # . . # . . # . .
28 . . . # # # . . # . . . . . . # . . # # # . # . # . # # # . . # . . . . . # . # # . # # # . # . . # #
29 # . # . . # # . # . . # # # # # # # # . # # # . # # # . # # . # # . . # . # . . # # # . # . . # . # #
30 # . . # . . . # # # # . . . . # . . . . . . . # . . . # . # . # # # # # . # . # . . . # # # . . . . .
31 . # . . . # . . . . # . . # . # . # # . . # . # # # . . # # . # # . . . # # . # # # . # # # # . # # .
32 # . # # # # # # # # # # # # . # . # # # # # . . . . # . # . . . . . # . # # . . . . . . # . # . # . #
33 # . # . . # # . . # . . . . # # . . # . . . . # # . # . # . . # # . # . . . . # # . # . # # . . # . #
34 # . # . . . . # . # # . # . # . # . # . # # # . # . . # # # # # # . # . # # # . # . # # . # . . # . .
35 . . # # . # . . # . # . # . # # . . # # . . # # . # . . . . . # . . # # # . # # . . . # . # # # . # #
36 . # . # # . # . . . # . # # . # . . . # . # . # # # # # # . . # . # . . # # . # . # . # . # . # # # #
37 . . # . # . . # # # . . . # . # # . # # . # # . . # # . # . . # . . . . . # . # . . # # . . . . . # #
38 # . . # # # . # . # . # . # # # # . # # . . # . . . . . # # . . # # . . . # . . # . # # # # . . . . #
39 # # . # # # . . # # . . # . . . # . . . . . # . . # # # # # # X . # # . # # # # . . . # # # # # # . .
40 . . . . # . # . # . # . . # # . # . # # . # # # # # . . # . # # . # # . # # . # . . . . # . . . # . .
41 # # # . # # . . # . . # . # . . # # . # . # # . . # . . # # # # . # # . . . # # # # # . # . . . # . #
42 . . . # . # . # # # . . . # . . . # # . . . . . . # # # . . # # . . . . # . # # . . # # # # . . # . .
43 . # . # . # . # # # # . # # # . # . # # # # # . # . . . # . . . . # # . # . . . . . . . # # # # . # .
44 # # . # . . . . # # # . . # # . . . . . . # # . . # # . . . # # # . # . # . # # . . # . # # . # # # #
45 . . # # # . # . . # . # . . . # # . . # . # # # . # . # # . # . # # . . # # . # # # . . . # . . . # .
46 # . # . # . # . . # # . # # . # # # # # . . # . . # # . # . # # . # . . . # . # . # . . . # # . . # #
47 # . # # . . # # . . # # # # . # # . . . . . # # . . # # . . . # # # # . # # . # . # # . # . # . # . #
48 # # . # . . . # # # . . # . . . . . # # . . . # # # . # . . . . . # # . # # . # . # # . . # # . . # #
49 . # # # # . # . . . # . # . . # # . # # # . # . . . . # # . . # . . . . . . # # . . # # . # . # . . .
50 . . . # # . . # # . . # # # # # # . . # # . . # # # . # # # # # # # # . # . # # # . # . . # # . # # #
]#